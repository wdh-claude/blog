---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import { SITE_TITLE } from '../consts';

const models = [
	{ id: 'nano-banana-pro', name: 'Nano Banana Pro', desc: 'Google Gemini-powered. 32K char prompts, 1Kâ€“4K resolution, aspect ratio support.', price: '~$0.12' },
	{ id: 'flux-2-pro', name: 'Flux 2 Pro', desc: 'Black Forest Labs. 3K char prompts, aspect ratio support.', price: '$0.04' },
	{ id: 'flux-2-max', name: 'Flux 2 Max', desc: 'Higher quality Flux. 3K char prompts, up to 50 steps, aspect ratio support.', price: '$0.09' },
	{ id: 'gpt-image-1-5', name: 'GPT Image 1.5', desc: 'OpenAI model. 32K char prompts, aspect ratio support.', price: '$0.23' },
	{ id: 'imagineart-1.5-pro', name: 'ImagineArt 1.5 Pro', desc: 'ImagineArt. 10K char prompts, aspect ratio support.', price: '$0.05' },
	{ id: 'venice-sd35', name: 'Venice SD35', desc: 'Stable Diffusion 3.5 Large. 1.5K char prompts, 16px divisor.', price: '$0.01' },
	{ id: 'hidream', name: 'HiDream', desc: 'HiDream-I1-Dev. 1.5K char prompts, 8px divisor.', price: '$0.01' },
	{ id: 'z-image-turbo', name: 'Z-Image Turbo', desc: 'Tongyi Z-Image. 7.5K char prompts, 8-step max. Default model & fastest.', price: '$0.01' },
	{ id: 'qwen-image', name: 'Qwen Image', desc: 'Qwen Image gen. 1.5K char prompts, 8-step max. Highest quality trait.', price: '$0.01' },
	{ id: 'chroma', name: 'Chroma', desc: 'Chroma1-HD by Lodestones. 7.5K char prompts, 10-step max.', price: '$0.01' },
	{ id: 'wai-Illustrious', name: 'Anime (WAI)', desc: 'WAI Illustrious. 1.5K char prompts, anime art style, 16px divisor.', price: '$0.01' },
	{ id: 'seedream-v4', name: 'Seedream V4.5', desc: 'Seedream V4.5. 10K char prompts, aspect ratio support.', price: '$0.05' },
];

const prompts = [
	{
		key: 'hero-mascot',
		title: 'The Hero',
		prompt: 'A powerful superhero mascot character in deep purple armor with gold accents, standing heroically on a rooftop at sunset, cape flowing, digital art style, character design',
	},
	{
		key: 'sidekick-workshop',
		title: 'The Sidekick\'s Workshop',
		prompt: 'A friendly orange robot sidekick building a website on a holographic computer screen, teal glowing accents, cozy workshop with tools and code floating around, digital art',
	},
	{
		key: 'team-action',
		title: 'Hero & Sidekick',
		prompt: 'A purple-armored superhero and an orange robot sidekick standing back to back, ready for action, city skyline behind them, dramatic lighting, comic book art style',
	},
];

// Claudius gallery images
const claudiusBase = [
	{ file: 'base-character.png', title: 'Base Character', desc: 'The original Claudius avatar - a cute robot lobster' },
	{ file: 'underwater-hero.png', title: 'Underwater Hero', desc: 'Claudius in an underwater coral reef scene' },
];

const claudiusHolidays = [
	{ file: 'birthday.png', title: 'Birthday', desc: 'Party time! Balloons, confetti, and cake' },
	{ file: 'christmas.png', title: 'Christmas', desc: 'Santa hat, snowflakes, and presents' },
	{ file: 'valentines.png', title: 'Valentine\'s Day', desc: 'Hearts and love in the air' },
	{ file: 'halloween.png', title: 'Halloween', desc: 'Spooky but cute with autumn vibes' },
];

const claudiusAnimations = [
	{ file: 'video-20260214-170626.mp4', title: 'Underwater Animation', desc: 'Claudius in motion - bubbles, seaweed, fish' },
	{ file: 'assembly-line.mp4', title: 'Assembly Line', desc: 'Multiple Claudiuses building widgets together' },
	{ file: 'office.mp4', title: 'Office Day', desc: 'Multiple Claudiuses working in a tech office' },
];

// Video model comparison
const videoModels = [
	{ file: 'wan-2.6.mp4', title: 'WAN 2.6', desc: '10s, 16:9', model: 'wan-2.6-text-to-video' },
	{ file: 'ltx-2-19b.mp4', title: 'LTX 2 19B', desc: '10s, 16:9', model: 'ltx-2-19b-full-text-to-video' },
	{ file: 'vidu-q3.mp4', title: 'Vidu Q3', desc: '10s, 16:9', model: 'vidu-q3-text-to-video' },
	{ file: 'sora-2.mp4', title: 'Sora 2', desc: '8s, 16:9', model: 'sora-2-text-to-video' },
];
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead
			title={`AI Image Gallery | ${SITE_TITLE}`}
			description="Claudius the robot lobster mascot and Venice AI image generation model comparisons."
		/>
	</head>
	<body>
		<Header />

		<!-- Page Header -->
		<section class="page-header">
			<div class="page-header-inner">
				<h1>AI Image Gallery</h1>
				<p>Claudius the robot lobster and Venice AI model comparisons</p>
			</div>
		</section>

		<main>
			<!-- Tab Navigation -->
			<div class="tabs-container">
				<div class="tabs" role="tablist">
					<button 
						type="button" 
						role="tab" 
						id="tab-claudius" 
						aria-controls="panel-claudius" 
						aria-selected="true"
						class="tab active"
					>
						ðŸ¦ž Meet Claudius
					</button>
					<button 
						type="button" 
						role="tab" 
						id="tab-models" 
						aria-controls="panel-models" 
						aria-selected="false"
						class="tab"
					>
						ðŸŽ¨ Model Comparison
					</button>
				</div>
			</div>

			<!-- Claudius Tab Panel -->
			<section 
				id="panel-claudius" 
				role="tabpanel" 
				aria-labelledby="tab-claudius"
				class="tab-panel active"
			>
				<div class="claudius-intro">
					<h2>Claudius</h2>
					<p class="tagline">The official AI assistant mascot â€” a cute robot lobster born <strong>February 13, 2026</strong>.</p>
					<p>Created using Venice AI's image generation and editing models, Claudius evolved through multiple iterations to become the friendly face you see today.</p>
				</div>

				<!-- Base Character -->
				<div class="claudius-section">
					<h3>The Character</h3>
					<div class="claudius-grid base-grid">
						{claudiusBase.map((item) => (
							<div class="claudius-item">
								<div class="claudius-image-wrapper">
									<img
										src={`{import.meta.env.BASE_URL}images/gallery/claudius/${item.file}`}
										alt={item.title}
										loading="lazy"
									/>
								</div>
								<div class="claudius-label">
									<strong>{item.title}</strong>
									<span>{item.desc}</span>
								</div>
							</div>
						))}
					</div>
				</div>

				<!-- Holiday Variations -->
				<div class="claudius-section">
					<h3>ðŸŽ‰ Holiday Celebrations</h3>
					<div class="claudius-grid holidays-grid">
						{claudiusHolidays.map((item) => (
							<div class="claudius-item">
								<div class="claudius-image-wrapper">
									<img
										src={`{import.meta.env.BASE_URL}images/gallery/claudius/holidays/${item.file}`}
										alt={`${item.title} Claudius`}
										loading="lazy"
									/>
								</div>
								<div class="claudius-label">
									<strong>{item.title}</strong>
									<span>{item.desc}</span>
								</div>
							</div>
						))}
					</div>
				</div>

				<!-- Animations -->
				<div class="claudius-section">
					<h3>ðŸŽ¬ Animations</h3>
					<p class="section-note">Generated with Venice AI's <strong>LTX 2 19B</strong> image-to-video model</p>
					<div class="claudius-grid animations-grid">
						{claudiusAnimations.map((item) => (
							<div class="claudius-item video-item">
								<div class="claudius-video-wrapper">
									<video
										src={`{import.meta.env.BASE_URL}images/gallery/claudius/animations/${item.file}`}
										controls
										playsinline
										preload="metadata"
									></video>
								</div>
								<div class="claudius-label">
									<strong>{item.title}</strong>
									<span>{item.desc}</span>
								</div>
							</div>
						))}
					</div>
				</div>

				<!-- Video Model Comparison -->
				<div class="claudius-section">
					<h3>ðŸŽ¥ Text-to-Video Model Comparison</h3>
					<p class="section-note">Same prompt: "A powerful superhero mascot in purple and gold armor stands heroically on a rooftop at sunset, cape flowing dramatically in the wind, city skyline below, epic cinematic lighting"</p>
					<div class="claudius-grid video-comp-grid">
						{videoModels.map((item) => (
							<div class="claudius-item video-item">
								<div class="claudius-video-wrapper">
									<video
										src={`{import.meta.env.BASE_URL}images/gallery/video-comparison/${item.file}`}
										controls
										playsinline
										preload="metadata"
									></video>
								</div>
								<div class="claudius-label">
									<strong>{item.title}</strong>
									<span>{item.desc}</span>
								</div>
							</div>
						))}
					</div>
				</div>
			</section>

			<!-- Model Comparison Tab Panel -->
			<section 
				id="panel-models" 
				role="tabpanel" 
				aria-labelledby="tab-models"
				class="tab-panel"
				hidden
			>
				<!-- Model Legend -->
				<div class="models-legend">
					<div class="models-legend-header">
						<h2>Models</h2>
						<button type="button" id="clear-filters" class="clear-filters" hidden>Show All</button>
					</div>
					<p class="filter-hint">Click models to filter the gallery. Select multiple to compare.</p>
					<div class="models-grid">
						{models.map((model) => (
							<button type="button" class="model-card card-gradient" data-model-id={model.id}>
								<strong>{model.name}</strong>
								<code>{model.id}</code>
								<span class="model-desc">{model.desc}</span>
								<span class="model-price">{model.price}/image</span>
							</button>
						))}
					</div>
				</div>

				<!-- Gallery Sections -->
				{prompts.map((promptItem) => (
					<section class="gallery-section">
						<div class="prompt-header">
							<h2>{promptItem.title}</h2>
							<p class="prompt-text">
								<strong>Prompt:</strong> <em>"{promptItem.prompt}"</em>
							</p>
						</div>
						<div class="gallery-grid">
							{models.map((model, i) => (
								<div class="gallery-item" data-model-id={model.id}>
									<button
										type="button"
										class="gallery-image-link"
										data-lightbox-group={promptItem.key}
										data-lightbox-index={i}
										data-lightbox-src={`{import.meta.env.BASE_URL}images/gallery/model-comparisons/${promptItem.key}--${model.id}.webp`}
										data-lightbox-alt={`${promptItem.title} by ${model.name}`}
										data-lightbox-model={model.name}
									>
										<img
											src={`{import.meta.env.BASE_URL}images/gallery/model-comparisons/${promptItem.key}--${model.id}.webp`}
											alt={`${promptItem.title} by ${model.name}`}
											loading="lazy"
										/>
									</button>
									<div class="gallery-label">
										<span class="gallery-model-name">{model.name}</span>
									</div>
								</div>
							))}
						</div>
					</section>
				))}

				<!-- Info -->
				<div class="gallery-info">
					<div class="info-card card">
						<div class="info-card-inner">
							<h3>About This Gallery</h3>
							<p>
								All images were generated using the
								<a href="https://venice.ai" target="_blank">Venice AI</a> API
								via the <code>/api/v1/image/generate</code> endpoint. Each model received
								the exact same prompt text. Images are shown at their default output resolution.
							</p>
							<p>
								Venice AI provides access to multiple image generation backends through a
								single API. Some models (like Nano Banana Pro) support aspect ratios and
								resolution selection, while others (like Venice SD35) use width/height with
								divisor constraints.
							</p>
						</div>
					</div>
				</div>
			</section>
		</main>

		<Footer />

		<!-- Lightbox -->
		<div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Image viewer">
			<div class="lightbox-backdrop"></div>
			<button type="button" class="lightbox-close" aria-label="Close">&times;</button>
			<button type="button" class="lightbox-prev" aria-label="Previous image">&#8249;</button>
			<button type="button" class="lightbox-next" aria-label="Next image">&#8250;</button>
			<div class="lightbox-content">
				<img id="lightbox-img" src="" alt="" />
				<div class="lightbox-caption">
					<span id="lightbox-model"></span>
					<span id="lightbox-counter"></span>
				</div>
			</div>
		</div>
	</body>
</html>

<style>
	.page-header {
		background: linear-gradient(135deg, var(--sk-orange), var(--sk-orange-600), var(--sk-teal));
		padding: 3rem 1.5rem;
		text-align: center;
	}
	.page-header-inner {
		max-width: 600px;
		margin: 0 auto;
	}
	.page-header h1 {
		color: white;
		font-size: 2.5rem;
		margin-bottom: 0.5rem;
	}
	.page-header p {
		color: rgba(255,255,255,0.8);
		font-size: 1.1rem;
		margin: 0;
	}

	main {
		max-width: 1400px;
		margin: 0 auto;
		padding: 2rem 1.5rem 4rem;
	}

	/* Tabs */
	.tabs-container {
		margin-bottom: 2rem;
	}
	.tabs {
		display: flex;
		gap: 0.5rem;
		border-bottom: 2px solid var(--sk-gray-200);
		padding-bottom: 0;
	}
	.tab {
		font-family: var(--font-heading);
		font-size: 1.1rem;
		font-weight: 600;
		padding: 1rem 2rem;
		border: none;
		background: none;
		color: var(--sk-gray-500);
		cursor: pointer;
		position: relative;
		transition: color 0.2s ease;
	}
	.tab:hover {
		color: var(--sk-orange);
	}
	.tab.active {
		color: var(--sk-orange);
	}
	.tab.active::after {
		content: '';
		position: absolute;
		bottom: -2px;
		left: 0;
		right: 0;
		height: 3px;
		background: var(--sk-orange);
		border-radius: 3px 3px 0 0;
	}

	/* Tab Panels */
	.tab-panel {
		display: none;
	}
	.tab-panel.active {
		display: block;
	}

	/* Claudius Styles */
	.claudius-intro {
		text-align: center;
		max-width: 700px;
		margin: 0 auto 3rem;
	}
	.claudius-intro h2 {
		color: var(--sk-orange);
		font-size: 2.5rem;
		margin-bottom: 0.5rem;
	}
	.claudius-intro .tagline {
		font-size: 1.2rem;
		color: var(--sk-gray-600);
		margin-bottom: 1rem;
	}
	.claudius-intro p {
		color: var(--sk-gray-500);
		line-height: 1.7;
	}

	.claudius-section {
		margin-bottom: 3rem;
	}
	.claudius-section h3 {
		color: var(--sk-dark);
		font-size: 1.5rem;
		margin-bottom: 1rem;
	}
	.section-note {
		color: var(--sk-gray-500);
		font-size: 0.9rem;
		margin-bottom: 1.5rem;
	}

	.claudius-grid {
		display: grid;
		gap: 1.5rem;
	}
	.base-grid {
		grid-template-columns: repeat(2, 1fr);
		max-width: 800px;
		margin: 0 auto;
	}
	.holidays-grid {
		grid-template-columns: repeat(4, 1fr);
	}
	.animations-grid {
		grid-template-columns: repeat(2, 1fr);
		max-width: 900px;
		margin: 0 auto;
	}
	.video-comp-grid {
		grid-template-columns: repeat(4, 1fr);
	}

	.claudius-item {
		background: white;
		border-radius: var(--radius-xl);
		overflow: hidden;
		box-shadow: var(--shadow-md);
		transition: transform 0.2s ease, box-shadow 0.2s ease;
	}
	.claudius-item:hover {
		transform: translateY(-4px);
		box-shadow: var(--shadow-xl);
	}

	.claudius-image-wrapper {
		aspect-ratio: 1;
		overflow: hidden;
	}
	.claudius-image-wrapper img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.claudius-video-wrapper {
		aspect-ratio: 1;
		overflow: hidden;
		background: var(--sk-gray-100);
	}
	.claudius-video-wrapper video {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.claudius-label {
		padding: 1rem;
		text-align: center;
	}
	.claudius-label strong {
		display: block;
		color: var(--sk-dark);
		font-family: var(--font-heading);
		font-size: 1rem;
		margin-bottom: 0.25rem;
	}
	.claudius-label span {
		color: var(--sk-gray-500);
		font-size: 0.85rem;
	}

	/* Model Comparison Styles */
	.models-legend {
		margin-bottom: 3rem;
	}
	.models-legend-header {
		display: flex;
		align-items: center;
		gap: 1rem;
		margin-bottom: 0.5rem;
	}
	.models-legend-header h2 {
		color: var(--color-primary);
		margin: 0;
	}
	.filter-hint {
		font-size: 0.85rem;
		color: var(--sk-gray-400);
		margin: 0 0 1rem;
	}
	.clear-filters {
		font-family: var(--font-heading);
		font-size: 0.8rem;
		font-weight: 600;
		padding: 0.35rem 0.85rem;
		border: 1.5px solid var(--sk-orange);
		border-radius: var(--radius-lg);
		background: none;
		color: var(--sk-orange);
		cursor: pointer;
		transition: background 0.2s ease, color 0.2s ease;
	}
	.clear-filters:hover {
		background: var(--sk-orange);
		color: white;
	}
	.models-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
		gap: 1rem;
	}
	.model-card {
		display: flex;
		flex-direction: column;
		gap: 0.35rem;
		padding: 1.25rem;
		border: 2px solid transparent;
		cursor: pointer;
		transition: border-color 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
		text-align: left;
	}
	.model-card:hover {
		border-color: var(--sk-orange-300, #f0a070);
	}
	.model-card.selected {
		border-color: var(--sk-orange);
		box-shadow: 0 0 0 1px var(--sk-orange), var(--shadow-md);
	}
	.model-card.dimmed {
		opacity: 0.45;
	}
	.model-card strong {
		font-family: var(--font-heading);
		color: var(--sk-dark);
		font-size: 1rem;
	}
	.model-card code {
		font-size: 0.75rem;
		align-self: flex-start;
	}
	.model-desc {
		font-size: 0.8rem;
		color: var(--sk-gray-500);
		line-height: 1.4;
	}
	.model-price {
		font-size: 0.8rem;
		font-weight: 600;
		color: var(--sk-teal-700);
		font-family: var(--font-heading);
	}

	.gallery-item {
		transition: box-shadow 0.3s ease, transform 0.3s ease, opacity 0.3s ease;
	}
	.gallery-item.hidden-by-filter {
		display: none;
	}

	.gallery-section {
		margin-bottom: 4rem;
	}
	.prompt-header {
		margin-bottom: 1.5rem;
	}
	.prompt-header h2 {
		color: var(--sk-dark);
		margin-bottom: 0.5rem;
	}
	.prompt-text {
		color: var(--sk-gray-500);
		font-size: 0.95rem;
		line-height: 1.5;
	}
	.prompt-text em {
		color: var(--sk-gray-600);
	}

	.gallery-grid {
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		gap: 1rem;
	}

	.gallery-item {
		border-radius: var(--radius-xl);
		overflow: hidden;
		background: white;
		box-shadow: var(--shadow-md);
	}
	.gallery-item:hover {
		box-shadow: var(--shadow-xl);
		transform: translateY(-2px);
	}

	.gallery-image-link {
		display: block;
		aspect-ratio: 1;
		overflow: hidden;
		width: 100%;
		border: none;
		padding: 0;
		margin: 0;
		background: none;
		cursor: pointer;
	}
	.gallery-image-link img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		border-radius: 0;
		transition: transform 0.3s ease;
	}
	.gallery-item:hover .gallery-image-link img {
		transform: scale(1.05);
	}

	.gallery-label {
		padding: 0.6rem 0.75rem;
		text-align: center;
	}
	.gallery-model-name {
		font-family: var(--font-heading);
		font-size: 0.8rem;
		font-weight: 600;
		color: var(--sk-gray-700);
	}

	.gallery-info {
		margin-top: 2rem;
	}
	.info-card-inner {
		padding: 2rem;
	}
	.info-card h3 {
		color: var(--color-primary);
		margin-bottom: 1rem;
	}
	.info-card p {
		color: var(--sk-gray-600);
		font-size: 0.95rem;
		line-height: 1.7;
	}
	.info-card a {
		color: var(--sk-teal-600);
	}

	@media (max-width: 1024px) {
		.gallery-grid {
			grid-template-columns: repeat(3, 1fr);
		}
		.holidays-grid {
			grid-template-columns: repeat(2, 1fr);
		}
	}
	@media (max-width: 768px) {
		.gallery-grid {
			grid-template-columns: repeat(2, 1fr);
		}
		.models-grid {
			grid-template-columns: 1fr;
		}
		.base-grid,
		.animations-grid {
			grid-template-columns: 1fr;
		}
		.tabs {
			flex-wrap: wrap;
			justify-content: center;
		}
		.tab {
			padding: 0.75rem 1.25rem;
			font-size: 1rem;
		}
	}
	@media (max-width: 480px) {
		.gallery-grid {
			grid-template-columns: 1fr;
		}
		.holidays-grid {
			grid-template-columns: 1fr;
		}
	}

	/* Lightbox */
	.lightbox {
		position: fixed;
		inset: 0;
		z-index: 100;
		display: flex;
		align-items: center;
		justify-content: center;
		opacity: 0;
		pointer-events: none;
		transition: opacity 0.25s ease;
	}
	.lightbox[aria-hidden="false"] {
		opacity: 1;
		pointer-events: auto;
	}
	.lightbox-backdrop {
		position: absolute;
		inset: 0;
		background: rgba(0, 0, 0, 0.85);
	}
	.lightbox-content {
		position: relative;
		max-width: 90vw;
		max-height: 85vh;
		display: flex;
		flex-direction: column;
		align-items: center;
	}
	.lightbox-content img {
		max-width: 90vw;
		max-height: 80vh;
		object-fit: contain;
		border-radius: var(--radius-lg);
		box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5);
	}
	.lightbox-caption {
		display: flex;
		align-items: center;
		gap: 1rem;
		margin-top: 0.75rem;
		color: rgba(255, 255, 255, 0.85);
		font-family: var(--font-heading);
		font-size: 0.9rem;
	}
	#lightbox-counter {
		color: rgba(255, 255, 255, 0.5);
		font-size: 0.8rem;
	}
	.lightbox-close,
	.lightbox-prev,
	.lightbox-next {
		position: absolute;
		z-index: 101;
		background: none;
		border: none;
		color: white;
		cursor: pointer;
		transition: color 0.2s ease, transform 0.2s ease;
	}
	.lightbox-close:hover,
	.lightbox-prev:hover,
	.lightbox-next:hover {
		color: var(--sk-orange);
	}
	.lightbox-close {
		top: 1rem;
		right: 1.5rem;
		font-size: 2.5rem;
		line-height: 1;
	}
	.lightbox-prev,
	.lightbox-next {
		top: 50%;
		transform: translateY(-50%);
		font-size: 3.5rem;
		line-height: 1;
		padding: 0.5rem;
	}
	.lightbox-prev:hover,
	.lightbox-next:hover {
		transform: translateY(-50%) scale(1.15);
	}
	.lightbox-prev {
		left: 1rem;
	}
	.lightbox-next {
		right: 1rem;
	}
	@media (max-width: 768px) {
		.lightbox-prev,
		.lightbox-next {
			font-size: 2.5rem;
		}
		.lightbox-close {
			font-size: 2rem;
		}
	}
</style>

<script>
	// --- Tab Switching ---
	const tabs = document.querySelectorAll<HTMLButtonElement>('.tab');
	const panels = document.querySelectorAll<HTMLElement>('.tab-panel');

	tabs.forEach((tab) => {
		tab.addEventListener('click', () => {
			const targetId = tab.id.replace('tab-', 'panel-');
			
			// Update tabs
			tabs.forEach((t) => {
				t.classList.remove('active');
				t.setAttribute('aria-selected', 'false');
			});
			tab.classList.add('active');
			tab.setAttribute('aria-selected', 'true');
			
			// Update panels
			panels.forEach((panel) => {
				panel.classList.remove('active');
				panel.hidden = true;
			});
			const targetPanel = document.getElementById(targetId);
			if (targetPanel) {
				targetPanel.classList.add('active');
				targetPanel.hidden = false;
			}
		});
	});

	// --- Model Filtering ---
	const selectedModels = new Set<string>();
	const modelCards = document.querySelectorAll<HTMLButtonElement>('.model-card[data-model-id]');
	const galleryItems = document.querySelectorAll<HTMLElement>('.gallery-item[data-model-id]');
	const clearBtn = document.getElementById('clear-filters') as HTMLButtonElement;

	function applyFilters() {
		const hasFilter = selectedModels.size > 0;

		// Toggle clear button
		clearBtn.hidden = !hasFilter;

		// Update model cards
		modelCards.forEach((card) => {
			const id = card.dataset.modelId!;
			if (hasFilter) {
				card.classList.toggle('selected', selectedModels.has(id));
				card.classList.toggle('dimmed', !selectedModels.has(id));
			} else {
				card.classList.remove('selected', 'dimmed');
			}
		});

		// Show/hide gallery items
		galleryItems.forEach((item) => {
			const id = item.dataset.modelId!;
			item.classList.toggle('hidden-by-filter', hasFilter && !selectedModels.has(id));
		});
	}

	modelCards.forEach((card) => {
		card.addEventListener('click', () => {
			const id = card.dataset.modelId!;
			if (selectedModels.has(id)) {
				selectedModels.delete(id);
			} else {
				selectedModels.add(id);
			}
			applyFilters();
		});
	});

	clearBtn.addEventListener('click', () => {
		selectedModels.clear();
		applyFilters();
	});

	// --- Lightbox ---
	const lightbox = document.getElementById('lightbox')!;
	const lightboxImg = document.getElementById('lightbox-img') as HTMLImageElement;
	const lightboxModel = document.getElementById('lightbox-model')!;
	const lightboxCounter = document.getElementById('lightbox-counter')!;

	let currentGroup: string = '';
	let currentIndex = 0;
	let groupItems: HTMLButtonElement[] = [];

	function getVisibleGroupItems(group: string): HTMLButtonElement[] {
		return Array.from(document.querySelectorAll<HTMLButtonElement>(
			`[data-lightbox-group="${group}"]`
		)).filter((btn) => {
			const item = btn.closest('.gallery-item');
			return !item?.classList.contains('hidden-by-filter');
		});
	}

	function showImage(index: number) {
		const item = groupItems[index];
		if (!item) return;
		currentIndex = index;
		lightboxImg.src = item.dataset.lightboxSrc!;
		lightboxImg.alt = item.dataset.lightboxAlt!;
		lightboxModel.textContent = item.dataset.lightboxModel!;
		lightboxCounter.textContent = `${index + 1} / ${groupItems.length}`;
	}

	function open(group: string, btn: HTMLButtonElement) {
		currentGroup = group;
		groupItems = getVisibleGroupItems(group);
		const index = groupItems.indexOf(btn);
		showImage(index >= 0 ? index : 0);
		lightbox.setAttribute('aria-hidden', 'false');
		document.body.style.overflow = 'hidden';
	}

	function close() {
		lightbox.setAttribute('aria-hidden', 'true');
		document.body.style.overflow = '';
	}

	function prev() {
		showImage((currentIndex - 1 + groupItems.length) % groupItems.length);
	}

	function next() {
		showImage((currentIndex + 1) % groupItems.length);
	}

	// Click handlers on gallery thumbnails
	document.querySelectorAll<HTMLButtonElement>('[data-lightbox-group]').forEach((btn) => {
		btn.addEventListener('click', () => {
			open(btn.dataset.lightboxGroup!, btn);
		});
	});

	// Lightbox controls
	lightbox.querySelector('.lightbox-close')!.addEventListener('click', close);
	lightbox.querySelector('.lightbox-prev')!.addEventListener('click', prev);
	lightbox.querySelector('.lightbox-next')!.addEventListener('click', next);
	lightbox.querySelector('.lightbox-backdrop')!.addEventListener('click', close);

	// Keyboard navigation
	document.addEventListener('keydown', (e) => {
		if (lightbox.getAttribute('aria-hidden') !== 'false') return;
		if (e.key === 'Escape') close();
		else if (e.key === 'ArrowLeft') prev();
		else if (e.key === 'ArrowRight') next();
	});
</script>
